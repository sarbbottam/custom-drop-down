YUI.add("input-data-formatter",function(a){var b;b=function(){return"object"==typeof b.instance?b.instance:(b.instance=this,void 0)},a.mix(b.prototype,{keyupHandler:function(a,b,c){var d=this.get("selectionStart");if(a.keyCode>47&&a.keyCode<58){for(var e=this.get("value"),f=e.length,g=e.split(""),h=0,i=b.length;i>h;h+=1)b[h]<=f&&e.charAt(b[h])!==c[h]&&(g.splice(b[h],0,c[h]),d++," "===c[h+1]&&(g.splice(b[h+1],0,c[h+1]),h+=1));this.set("value",g.join(""))}this.set("selectionStart",d),this.set("selectionEnd",d)},formatter:function(a){var b=a.get("value"),c=a.getAttribute("data-format"),d=c.length,e=c.match(/[^X]/g),f=[],g=-1;if(a.detach("keyup",this.keyupHandler),d){a.setAttribute("maxlength",d);for(var h=0,i=e.length;i>h;h+=1)g=c.indexOf(e[h],g+1),f.push(g);a.on("keyup",this.keyupHandler,null,f,e)}""!==b&&(a.set("value",b.replace(/[^\d]/g,"")),this.keyupHandler.call(a,{keyCode:48},f,e))},updateFormat:function(b){var c,d,e;c=a.one("#"+b.getAttribute("corresponding-field-id")),c&&(d=-1===b.get("selectedIndex")?0:b.get("selectedIndex"),e=b.all("option").item(d).getAttribute("corresponding-field-data-format"),e?c.setAttribute("data-format",e):c.setAttribute("data-format",""),this.formatter(c))}},!0),a.namespace("InputDataModifier"),a.InputDataModifier.InputDataFormatter=b},{requires:["node"]});