YUI.add("country-code-drop-down-event-handler",function(a){var b;b=function(a,b,c){this.countryCodeSelectNode=a.countryCodeSelectNode,this.countryCodeOptionNodes=a.countryCodeOptionNodes,this.selectedCountryCodeNode=a.selectedCountryCodeNode,this.mobileNode=a.mobileNode,this.mobileNodePlaceholder=this.mobileNode.get("parentNode").one(".placeholder"),this.countryCodesMenuNode=a.countryCodesMenuNode,this.countryNameId=a.countryNameId,this.menuHeight="",this.selectedIndex=0,this.customCountryCodeDropDownUpdateStyle=b,this.customCountryCodeDropDownIndex=c,this.countryNameStartsWith="",this.currentKeyPressTime=0,this.previousKeyPressTime=0},a.mix(b.prototype,{selectedCountryCodeNodeEventHandler:function(b,c){b.halt(),selectedIndex=c.countryCodeSelectNode.get("selectedIndex"),c.countryCodesMenuNode.setStyle("display","block"),c.mobileNode.addClass("highlight-border"),c.customCountryCodeDropDownUpdateStyle.highlightCountryCodeMenu(selectedIndex),a.fire("hide-country-codes-container",null,c.countryCodesMenuNode)},countryCodesMenuNodeKeydownHandler:function(a,b){switch((38===a.keyCode||40===a.keyCode||9===a.keyCode||27===a.keyCode)&&a.halt(),menuSize=b.countryCodesMenuNode.all("ul li").size(),a.keyCode){case 38:0===b.selectedIndex&&(b.selectedIndex=menuSize),b.selectedIndex-=1,b.customCountryCodeDropDownUpdateStyle.highlightCountryCodeMenu(b.selectedIndex);break;case 40:b.selectedIndex===menuSize-1&&(b.selectedIndex=-1),b.selectedIndex+=1,b.customCountryCodeDropDownUpdateStyle.highlightCountryCodeMenu(b.selectedIndex);break;case 9:b.mobileNode.focus(),b.countryCodesMenuNode.setStyle("display","none");break;case 27:b.selectedCountryCodeNode.one("a").focus(),b.countryCodesMenuNode.setStyle("display","none")}},selectCountryCode:function(b,c){b.halt();var d,e=b.target.getAttribute("data-code"),f=[];f.push('<span class="'),f.push(b.target.one("span").get("className")),f.push('"></span>&nbsp;<span class="country-code-arrow-container"><span class="country-code-arrow"></span></span>&nbsp;'),f.push('<span id="'+c.countryNameId+'" class="clipped">'+c.countryCodeOptionNodes.item(c.selectedIndex).get("innerHTML")+"</span>"),f.push(e),c.selectedCountryCodeNode.one("a").set("innerHTML",f.join("")),c.customCountryCodeDropDownUpdateStyle.updateMobileNodePadding(),c.countryCodesMenuNode.setStyle("display","none"),d=c.countryCodesMenuNode.all("li").indexOf(b.target.get("parentNode")),c.countryCodeSelectNode.set("selectedIndex",d),a.fire("country-code-change",null,c.countryCodeSelectNode),c.mobileNode.focus()},init:function(){var a=this;this.selectedCountryCodeNode.on("click",this.selectedCountryCodeNodeEventHandler,null,a),this.selectedCountryCodeNode.on("keydown",function(a,b){(40===a.keyCode||38===a.keyCode)&&(a.halt(),b.selectedCountryCodeNodeEventHandler(a,b))},null,a),this.countryCodesMenuNode.on("keydown",this.countryCodesMenuNodeKeydownHandler,null,a),this.countryCodesMenuNode.on("keypress",function(a,b){b.currentKeyPressTime=(new Date).getTime(),b.previousKeyPressTime&&b.currentKeyPressTime-b.previousKeyPressTime>500&&(b.countryNameStartsWith=""),b.previousKeyPressTime=b.currentKeyPressTime,b.countryNameStartsWith=b.countryNameStartsWith+String.fromCharCode(a.keyCode),b.selectedIndex=b.customCountryCodeDropDownIndex.getIndexOfCountryName(b.countryNameStartsWith),-1!==b.selectedIndex&&b.customCountryCodeDropDownUpdateStyle.highlightCountryCodeMenu(b.selectedIndex)},null,a),this.countryCodesMenuNode.on("mouseover",function(a,b){a.halt(),a.target.focus(),b.selectedIndex=b.countryCodesMenuNode.all("li").indexOf(a.target.get("parentNode"))},null,a),this.countryCodesMenuNode.all("li").on("click",this.selectCountryCode,null,a),this.countryCodesMenuNode.all("a").on("blur",function(a,b){b.mobileNode.removeClass("highlight-border")},null,a),this.countryCodesMenuNode.all("a").on("focus",function(a,b){a.halt(),b.mobileNode.addClass("highlight-border")},null,a),this.selectedCountryCodeNode.one("a").on("focus",function(a,b){b.mobileNode.addClass("highlight-border")},null,a),this.selectedCountryCodeNode.one("a").on("blur",function(a,b){b.mobileNode.removeClass("highlight-border")},null,a),this.mobileNode.on("blur",function(){this.removeClass("highlight-border")},null,a)}},!0),a.namespace("CustomDropDownMenu"),a.CustomDropDownMenu.CustomCountryCodeDropDownEventHandler=b});